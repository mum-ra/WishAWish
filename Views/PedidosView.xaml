<UserControl x:Class="WishAWish.Views.PedidosView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:WishAWish.ViewModels">
    <UserControl.DataContext>
        <vm:PedidosViewModel/>
    </UserControl.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource Card}">
            <StackPanel Orientation="Horizontal">
                <CheckBox Content="Somente Entregues" IsChecked="{Binding SomenteEntregues}" Margin="0,0,20,0"/>
                <CheckBox Content="Somente Pagos"     IsChecked="{Binding SomentePagos}"     Margin="0,0,20,0"/>
                <CheckBox Content="Somente Pendentes de Pagamento" IsChecked="{Binding SomentePendentesPagamento}"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="1" Style="{StaticResource Card}">
            <DataGrid ItemsSource="{Binding PedidosView}"
                      SelectedItem="{Binding Selecionado}"
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      SelectionMode="Single"
                      SelectionUnit="FullRow">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60"/>
                    <DataGridTextColumn Header="Pessoa" Binding="{Binding PessoaNome}" Width="*"/>
                    <DataGridTextColumn Header="Data"
                                        Binding="{Binding DataVenda, StringFormat=\{0:dd/MM/yyyy HH:mm\}}"
                                        Width="160" />
                    <DataGridTextColumn Header="Total"
                                        Binding="{Binding ValorTotal, StringFormat=\{0:C2\}}"
                                        Width="120"/>
                    <DataGridTextColumn Header="Pagamento" Binding="{Binding FormaPagamento}" Width="120"/>
                    <DataGridTextColumn Header="Status"     Binding="{Binding Status}" Width="120"/>
                    <DataGridTemplateColumn Header="Ações" Width="260">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Content="Pago"
                                            Command="{Binding DataContext.MarcarPagoCmd, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Margin="0 0 6 0"/>
                                    <Button Content="Enviado"
                                            Command="{Binding DataContext.MarcarEnviadoCmd, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Margin="0 0 6 0"/>
                                    <Button Content="Recebido"
                                            Command="{Binding DataContext.MarcarRecebidoCmd, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
